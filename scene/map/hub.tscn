[gd_scene load_steps=26 format=3 uid="uid://bgugvx7lggw5i"]

[ext_resource type="Texture2D" uid="uid://bre3ocyb3h24l" path="res://assets/visuel/Main_menu/Page0020.jpg" id="1_2norj"]
[ext_resource type="Script" path="res://script/2d_scene/hub.gd" id="1_wxaxt"]
[ext_resource type="Script" path="res://script/2d_scene/CharacterBody3D.gd" id="2_iljgu"]
[ext_resource type="Texture2D" uid="uid://clbxs0l8pxva6" path="res://assets/visuel/anim_reinette/reinette_idle0000.png" id="3_fhhhw"]
[ext_resource type="Texture2D" uid="uid://cq4u3gfat3jet" path="res://assets/visuel/anim_reinette/reinette_idle0001.png" id="4_aeb8g"]
[ext_resource type="PackedScene" uid="uid://jb0h6p3x7d1x" path="res://scene/interactable/door_2d.tscn" id="4_mfgea"]
[ext_resource type="Texture2D" uid="uid://c0kb47e0h7tu0" path="res://assets/visuel/anim_reinette/reinette_idle0002.png" id="5_v3l4e"]
[ext_resource type="Texture2D" uid="uid://cory53qsdutro" path="res://assets/visuel/anim_reinette/reinette_idle0003.png" id="6_pi6te"]
[ext_resource type="Texture2D" uid="uid://s48yffb3dd3u" path="res://assets/visuel/anim_reinette/reinette_walk0000.png" id="7_nnyim"]
[ext_resource type="Texture2D" uid="uid://clr1r4dvvlq7n" path="res://assets/visuel/anim_reinette/reinette_walk0001.png" id="8_4q3nw"]
[ext_resource type="Texture2D" uid="uid://dqni6miq0sso0" path="res://assets/visuel/anim_reinette/reinette_walk0002.png" id="9_xlfq0"]
[ext_resource type="Texture2D" uid="uid://cfdm3cw50j71a" path="res://assets/visuel/anim_reinette/reinette_walk0003.png" id="10_l4ljc"]
[ext_resource type="Texture2D" uid="uid://cho6u5ydyju24" path="res://assets/visuel/anim_reinette/reinette_walk0004.png" id="11_bdpht"]
[ext_resource type="Texture2D" uid="uid://fjwu4alb6fld" path="res://assets/visuel/anim_reinette/reinette_walk0005.png" id="12_5ciu6"]
[ext_resource type="PackedScene" uid="uid://o7ido6u8yes" path="res://assets/shader/render_container.tscn" id="14_bwui0"]
[ext_resource type="Texture2D" uid="uid://cvap5u6obn5xy" path="res://assets/charte graphique/paperFichier 14.png" id="16_sw5aa"]
[ext_resource type="FontFile" uid="uid://d3u06wqdtas8g" path="res://assets/visuel/font/PermanentMarker-Regular.ttf" id="17_ickxp"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_qgehu"]
sky_top_color = Color(0.615686, 0.356863, 0.447059, 1)
sky_horizon_color = Color(0.537255, 0.666667, 0.819608, 1)
sky_curve = 0.0776448
ground_bottom_color = Color(0.588235, 0.372549, 0.168627, 1)
ground_horizon_color = Color(0.647059, 0.654902, 0.670588, 1)
ground_curve = 0.139288
sun_curve = 0.197926

[sub_resource type="Sky" id="Sky_rkdmp"]
sky_material = SubResource("ProceduralSkyMaterial_qgehu")

[sub_resource type="Environment" id="Environment_fphjw"]
background_mode = 2
sky = SubResource("Sky_rkdmp")
glow_enabled = true
volumetric_fog_density = 0.0205
volumetric_fog_albedo = Color(0.14902, 0.313726, 0.14902, 1)
volumetric_fog_emission_energy = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2u6i8"]
albedo_texture = ExtResource("1_2norj")

[sub_resource type="PlaneMesh" id="PlaneMesh_v4u3s"]
material = SubResource("StandardMaterial3D_2u6i8")
size = Vector2(1000, 1000)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_jici5"]
data = PackedVector3Array(500, 0, 500, -500, 0, 500, 500, 0, -500, -500, 0, 500, -500, 0, -500, 500, 0, -500)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3cmmi"]
radius = 0.984585
height = 6.13193

[sub_resource type="SpriteFrames" id="SpriteFrames_6rbt4"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_fhhhw")
}, {
"duration": 1.0,
"texture": ExtResource("4_aeb8g")
}, {
"duration": 1.0,
"texture": ExtResource("5_v3l4e")
}, {
"duration": 1.0,
"texture": ExtResource("6_pi6te")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("7_nnyim")
}, {
"duration": 1.0,
"texture": ExtResource("8_4q3nw")
}, {
"duration": 1.0,
"texture": ExtResource("9_xlfq0")
}, {
"duration": 1.0,
"texture": ExtResource("10_l4ljc")
}, {
"duration": 1.0,
"texture": ExtResource("11_bdpht")
}, {
"duration": 1.0,
"texture": ExtResource("12_5ciu6")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[node name="Hub" type="Node3D" node_paths=PackedStringArray("Ui_Text")]
script = ExtResource("1_wxaxt")
Ui_Text = NodePath("Control")

[node name="Ambiance" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Ambiance"]
environment = SubResource("Environment_fphjw")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Ambiance"]
transform = Transform3D(-0.866024, -0.433016, 0.250001, 0, 0.499998, 0.866026, -0.500003, 0.749999, -0.43301, 0, 0, 0)
light_color = Color(0.580392, 0.592157, 0.4, 1)
light_angular_distance = 13.64
shadow_enabled = true

[node name="flood" type="StaticBody3D" parent="."]
collision_layer = 0
collision_mask = 0

[node name="MeshInstance3D" type="MeshInstance3D" parent="flood"]
mesh = SubResource("PlaneMesh_v4u3s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="flood"]
shape = SubResource("ConcavePolygonShape3D_jici5")

[node name="Player2D" type="CharacterBody3D" parent="." node_paths=PackedStringArray("player_sprite")]
transform = Transform3D(20, 0, 0, 0, 20, 0, 0, 0, 20, 0, 53.4819, 58.6798)
collision_mask = 8
collision_priority = 5.0
script = ExtResource("2_iljgu")
player_sprite = NodePath("AnimatedSprite3D")

[node name="playerColl" type="CollisionShape3D" parent="Player2D"]
shape = SubResource("CapsuleShape3D_3cmmi")

[node name="Camera_spring" type="SpringArm3D" parent="Player2D"]
transform = Transform3D(1, 0, 0, 0, 0.642788, 0.766044, 0, -0.766044, 0.642788, 0, 7.635, 7.405)

[node name="Camera3D" type="Camera3D" parent="Player2D/Camera_spring"]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0, 0, 0)
fov = 54.6

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Player2D"]
sprite_frames = SubResource("SpriteFrames_6rbt4")
animation = &"idle"
autoplay = "idle"

[node name="Door" parent="." instance=ExtResource("4_mfgea")]
transform = Transform3D(2, 0, 0, 0, 1, -1.73205, 0, 1.73205, 1, 0, 27.1781, -398.548)
next_scene = ExtResource("14_bwui0")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(1e-05, 1e-05)

[node name="TextureRect" type="TextureRect" parent="Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -373.0
offset_top = -240.0
offset_right = 374.0
offset_bottom = 70.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("16_sw5aa")
expand_mode = 1

[node name="RichTextLabel" type="RichTextLabel" parent="Control/TextureRect"]
layout_mode = 0
offset_left = 24.0
offset_top = 41.0
offset_right = 723.0
offset_bottom = 286.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_fonts/normal_font = ExtResource("17_ickxp")
theme_override_font_sizes/normal_font_size = 29
text = "vous venez d'atterir dans la carrière après avoir chercher un lieu ou vivre. depuis cet salle vous pourrez vous déplacez avec zqsd, essayez de vous familiarisez avec les déplacement avant de rentrer dans la première salle."

[node name="Button" type="Button" parent="Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -108.0
offset_top = 97.0
offset_right = 111.0
offset_bottom = 143.0
grow_horizontal = 2
grow_vertical = 0
text = "continue"

[connection signal="pressed" from="Control/Button" to="." method="_on_button_pressed"]
